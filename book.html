<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Appointment | SchedulePro</title>
  <link rel="stylesheet" href="book.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">
      <img src="https://cdn-icons-png.flaticon.com/512/2086/2086809.png" alt="logo">
      <h2>SchedulePro</h2>
    </div>
    <nav>
      <ul>
        <li><a href="features.html">Features</a></li>
        <li><a href="how-it-works.html">How it Works</a></li>
        <li><a href="pricing.html">Pricing</a></li>
      </ul>
    </nav>
    <div class="nav-buttons">
      <a href="signin.html" class="signin">Sign In</a>
      <a href="book.html" class="book-now active">Book Now</a>
      <a href="appointment.html" class="book-now">View Booked Appointments</a>
    </div>
  </header>

  <!-- Booking Form Section -->
  <section class="booking-form-section">
    <h1>Book Your Appointment</h1>
    <p>Choose your preferred date and time, and we'll confirm your booking</p>

    <form class="booking-form" id="appointmentForm" method="post" name="google-sheet">
      <!-- Personal Information -->
      <div class="form-section">
        <h3>üìã Personal Information</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>Full Name <span>*</span></label>
            <input type="text" id="name" name="Name" placeholder="your full name" required />
          </div>
          <div class="form-group">
            <label>Email <span>*</span></label>
            <input type="email" id="email" name="Email" placeholder="your email id" required />
          </div>
          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" id="phone" name="Number" placeholder="+91 xxxxxxxxxx" />
          </div>
          <div class="form-group">
            <label>Service Type <span>*</span></label>
            <select id="service" name="Service Type" required>
              <option value="">Select a service</option>
              <option>Consultation</option>
              <option>Therapy Session</option>
              <option>Haircut</option>
              <option>Other</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Date and Time -->
      <div class="form-section">
        <h3>üìÖ Select Date & Time</h3>
        <div class="form-grid">
          <div class="form-group">
            <label>Preferred Date <span>*</span></label>
            <input type="date" name="Date" id="date" required />
          </div>
          <div class="form-group">
            <label>Preferred Time <span>*</span></label>
            <select id="time" name="Preferred Time" required>
              <option value="">Select a time</option>
              <option>09:00 AM</option>
              <option>11:00 AM</option>
              <option>02:00 PM</option>
              <option>04:00 PM</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="form-section" required>
        <h3>üìù Reason for appointment</h3>
        <textarea id="notes" name="Reason" placeholder="Specify the reason for appointment."></textarea>
      </div>

      <!-- Buttons -->
      <div class="form-buttons">
        <button type="submit" name="Submit" class="confirm-btn">Confirm Appointment</button>
        <button type="reset" class="cancel-btn">Cancel</button>
      </div>

      <p class="required-note">* Required fields</p>
    </form>
  </section>
  

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-logo">
        <div class="logo-icon">üìÖ</div>
        <h2>SchedulePro</h2>
        <p>Simplifying appointment scheduling for businesses worldwide.</p>
      </div>

      <div class="footer-links">
        <div class="footer-column">
          <h3>Product</h3>
          <ul>
            <li><a href="features.html">Features</a></li>
            <li><a href="pricing.html">Pricing</a></li>
            <li><a href="#">Integrations</a></li>
            <li><a href="#">API</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Company</h3>
          <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </div>

        <div class="footer-column">
          <h3>Legal</h3>
          <ul>
            <li><a href="#">Privacy</a></li>
            <li><a href="#">Terms</a></li>
            <li><a href="#">Security</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>¬© <span id="year"></span> SchedulePro. All rights reserved.</p>
    </div>
  </footer>

  <!-- Google Sheets Integration Script -->
  <script>
// === GOOGLE SHEET FORM SUBMIT ===
const scriptURL = 'https://script.google.com/macros/s/AKfycbyglNss4b_HkwZsijS-BoJadjzT19qdEAD4Y4S3hrYrS48Ooo5k-d8ZWtL8B5wv7R-dEw/exec';
const form = document.forms['google-sheet'];

form.addEventListener('submit', e => {
  e.preventDefault();
  fetch(scriptURL, { method: 'POST', body: new FormData(form) })
    .then(() => {
      alert("‚úÖ Appointment submitted to Google Sheets!");
      saveToLocalStorage(); // also save locally
      form.reset();
      loadAppointments();
    })
    .catch(error => console.error('Error!', error.message));
});

// === LOCAL STORAGE FUNCTIONS ===

// Save appointment data locally
function saveToLocalStorage() {
  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;
  const phone = document.getElementById('phone').value;
  const service = document.getElementById('service').value;
  const date = document.getElementById('date').value;
  const time = document.getElementById('time').value;
  const notes = document.getElementById('notes').value;

  if (!name || !email || !service || !date || !time) {
    alert('‚ö†Ô∏è Please fill all required fields.');
    return;
  }

  const newAppointment = { name, email, phone, service, date, time, notes };

  let appointments = JSON.parse(localStorage.getItem('appointments')) || [];
  appointments.push(newAppointment);
  localStorage.setItem('appointments', JSON.stringify(appointments));
  alert('üíæ Appointment saved locally!');
}

// Load saved appointments when page loads
document.addEventListener('DOMContentLoaded', loadAppointments);

function loadAppointments() {
  const appointments = JSON.parse(localStorage.getItem('appointments')) || [];
  displayAppointments(appointments);
}

// Display appointments in the list
function displayAppointments(appointments) {
  const list = document.getElementById('appointmentList');
  list.innerHTML = '';

  if (appointments.length === 0) {
    list.innerHTML = '<p>No appointments saved yet.</p>';
    return;
  }

  appointments.forEach((app, index) => {
    const div = document.createElement('div');
    div.classList.add('appointment-item');
    div.innerHTML = `
      <strong>${app.name}</strong> ‚Äî ${app.service}<br>
      üìÖ ${app.date} | üïí ${app.time}<br>
      ‚úâÔ∏è ${app.email} | üìû ${app.phone}<br>
      ${app.notes ? "üìù " + app.notes : ""}
      <br>
      <button onclick="deleteAppointment(${index})">üóë Delete</button>
    `;
    list.appendChild(div);
  });
}

// Delete appointment
function deleteAppointment(index) {
  let appointments = JSON.parse(localStorage.getItem('appointments')) || [];
  appointments.splice(index, 1);
  localStorage.setItem('appointments', JSON.stringify(appointments));
  loadAppointments();
}
</script>

</body>
</html>
